name: Update Get-My-Commits Fetch Date

on: [push]
#   schedule:
#     - cron: "0 0 1 1 *"
#     - cron: "0 0 20 5 *"
#     - cron: "0 0 20 8 *"

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
      
      - name: Get Today
        run: |
          today=$(date +'%Y-%m-%dT00:00:00Z')
          echo $today
      
      - name: Replace Date
        run: sed -i "s|FETCHSINCE \= \".*\"|FETCHSINCE \= \"2022-01-02T00:00:00Z\"|g" ./get-my-commits/index.js
        
      - name: Git Config
        run: |
          git config --global user.name 'Bill Ni'
          git config --global user.email 'bill.8ni@gmail.com'
          
      - name: Push Changes
        run: |
          git commit -am "updated date"
          git push
